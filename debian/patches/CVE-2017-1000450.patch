Index: opencv-2.3.1/modules/highgui/src/grfmt_bmp.cpp
===================================================================
--- opencv-2.3.1.orig/modules/highgui/src/grfmt_bmp.cpp	2017-12-31 15:42:47.000000000 +0100
+++ opencv-2.3.1/modules/highgui/src/grfmt_bmp.cpp	2018-01-04 19:29:11.689080986 +0100
@@ -366,6 +366,9 @@
                                                 gray_palette[code] );
 
                         line_end_flag = y - prev_y;
+
+                        if( y >= m_height )
+                            break;
                     }
                     else if( code > 2 ) // absolute mode
                     {
